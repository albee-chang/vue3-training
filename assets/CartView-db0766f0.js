import{_ as v,e as x,r as C,o as c,c as d,a as t,d as i,t as n,F as h,f as g,g as m,b as y,w as k,h as f,v as I}from"./index-efdcecb0.js";const{VITE_APP_URL:r,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"albee2022vue",VITE_TEXT:"這是產品的環境",BASE_URL:"/live-vue3-training-chapter-works-main/week6/dist/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{products:[],productId:"",cart:{},loadingItem:""}},components:{RouterLink:x},methods:{getCartList(){this.$http.get(`${r}/v2/api/${u}/cart`).then(e=>{console.log("購物車列表: ",e.data.data),this.cart=e.data.data})},updateCart(e){const a={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${r}/v2/api/${u}/cart/${e.id}`,{data:a}).then(p=>{console.log("更新購物車: ",p.data),this.getCartList(),this.loadingItem=""})},deleteCartItem(e){this.loadingItem=e.id,this.$http.delete(`${r}/v2/api/${u}/cart/${e.id}`).then(a=>{console.log("刪除單一品項: ",a.data),this.getCartList(),this.loadingItem=""})},deleteAllCart(){this.$http.delete(`${r}/v2/api/${u}/carts`).then(e=>{console.log("刪除單一品項: ",e.data),this.getCartList()})}},mounted(){this.getCartList()}},L=t("div",{class:"text-secondary mb-2"},[t("i",{class:"bi bi-arrow-right-circle-fill"}),i(" 購物車頁面 ")],-1),$={class:"navbar bg-light"},P={class:"container-fluid"},w=t("span",{class:"navbar-brand",href:"#"},"亂亂賣漫畫店",-1),E={key:0,type:"button",class:"btn nav-link"},T={class:"badge rounded-pill bg-danger text-white"},A={key:1},R={class:"text-end mt-5"},D={class:"table align-middle"},U=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價"),t("th")])],-1),q=["onClick"],B=t("div",{class:"text-success"},"已套用優惠券",-1),N={class:"input-group input-group-sm"},S={class:"input-group"},F=["onUpdate:modelValue","onChange"],H=["value"],M={class:"input-group-text",id:"basic-addon2"},O={class:"text-end"},X=t("small",{class:"text-success"},"折扣價：",-1),j=t("td",null,null,-1),z=t("td",{colspan:"3",class:"text-end"},"總計",-1),G={class:"text-end"},J=t("td",null,null,-1),K=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),Q={class:"text-end text-success"},W={class:"text-end mt-5"},Y={class:"btn btn-primary",type:"button"};function Z(e,a,p,tt,l,_){const b=C("RouterLink");return c(),d(h,null,[L,t("nav",$,[t("div",P,[w,l.cart.carts?(c(),d("button",E,[i(" 購物車 "),t("span",T,n(l.cart.carts.length),1)])):(c(),d("div",A,"購物車是空的"))])]),t("div",R,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:a[0]||(a[0]=s=>_.deleteAllCart())}," 清空購物車 ")]),t("table",D,[U,t("tbody",null,[l.cart.carts?(c(!0),d(h,{key:0},g(l.cart.carts,s=>(c(),d("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:o=>_.deleteCartItem(s)}," x ",8,q)]),t("td",null,[i(n(s.product.title)+" ",1),B]),t("td",null,[t("div",N,[t("div",S,[f(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":o=>s.qty=o,onChange:o=>_.updateCart(s)},[(c(),d(h,null,g(10,o=>t("option",{value:o,key:o+"inCart"},n(o),9,H)),64))],40,F),[[I,s.qty]]),t("span",M,n(s.product.unit),1)])])]),t("td",null,[t("span",null,n(s.product.price),1)]),t("td",O,[X,i(" "+n(s.total),1)])]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[j,z,t("td",G,n(l.cart.total),1)]),t("tr",null,[J,K,t("td",Q,n(l.cart.final_total),1)])])]),t("div",W,[t("button",Y,[y(b,{to:"/charge",class:"text-white text-decoration-none"},{default:k(()=>[i("付款結帳")]),_:1})])])],64)}const st=v(V,[["render",Z]]);export{st as default};
