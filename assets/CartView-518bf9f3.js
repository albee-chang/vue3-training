import{_ as b,e as v,r as x,o as l,c,a as t,d,t as n,F as h,f as p,g as C,b as m,w as y,h as f,v as k}from"./index-6544174f.js";const{VITE_APP_URL:r,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"albee2022vue",VITE_TEXT:"這是產品的環境",BASE_URL:"/vue3-training/week6/",MODE:"production",DEV:!1,PROD:!0},I={data(){return{products:[],productId:"",cart:{},loadingItem:""}},components:{RouterLink:v},methods:{getCartList(){this.$http.get(`${r}/v2/api/${u}/cart`).then(e=>{this.cart=e.data.data})},updateCart(e){const i={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${r}/v2/api/${u}/cart/${e.id}`,{data:i}).then(()=>{this.getCartList(),this.loadingItem=""})},deleteCartItem(e){this.loadingItem=e.id,this.$http.delete(`${r}/v2/api/${u}/cart/${e.id}`).then(()=>{this.getCartList(),this.loadingItem=""})},deleteAllCart(){this.$http.delete(`${r}/v2/api/${u}/carts`).then(()=>{this.getCartList()})}},mounted(){this.getCartList()}},V=t("div",{class:"text-secondary mb-2"},[t("i",{class:"bi bi-arrow-right-circle-fill"}),d(" 購物車頁面 ")],-1),L={class:"navbar bg-light"},$={class:"container-fluid"},P=t("span",{class:"navbar-brand",href:"#"},"亂亂賣漫畫店",-1),E={key:0,type:"button",class:"btn nav-link"},T={class:"badge rounded-pill bg-danger text-white"},w={key:1},A={class:"text-end mt-5"},R={class:"table align-middle"},D=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價"),t("th")])],-1),U=["onClick"],q=t("div",{class:"text-success"},"已套用優惠券",-1),B={class:"input-group input-group-sm"},N={class:"input-group"},S=["onUpdate:modelValue","onChange"],F=["value"],H={class:"input-group-text",id:"basic-addon2"},M={class:"text-end"},O=t("small",{class:"text-success"},"折扣價：",-1),X=t("td",null,null,-1),j=t("td",{colspan:"3",class:"text-end"},"總計",-1),z={class:"text-end"},G=t("td",null,null,-1),J=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),K={class:"text-end text-success"},Q={class:"text-end mt-5"},W={class:"btn btn-primary",type:"button"};function Y(e,i,Z,tt,a,_){const g=x("RouterLink");return l(),c(h,null,[V,t("nav",L,[t("div",$,[P,a.cart.carts?(l(),c("button",E,[d(" 購物車 "),t("span",T,n(a.cart.carts.length),1)])):(l(),c("div",w,"購物車是空的"))])]),t("div",A,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:i[0]||(i[0]=s=>_.deleteAllCart())}," 清空購物車 ")]),t("table",R,[D,t("tbody",null,[a.cart.carts?(l(!0),c(h,{key:0},p(a.cart.carts,s=>(l(),c("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:o=>_.deleteCartItem(s)}," x ",8,U)]),t("td",null,[d(n(s.product.title)+" ",1),q]),t("td",null,[t("div",B,[t("div",N,[f(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":o=>s.qty=o,onChange:o=>_.updateCart(s)},[(l(),c(h,null,p(10,o=>t("option",{value:o,key:o+"inCart"},n(o),9,F)),64))],40,S),[[k,s.qty]]),t("span",H,n(s.product.unit),1)])])]),t("td",null,[t("span",null,n(s.product.price),1)]),t("td",M,[O,d(" "+n(s.total),1)])]))),128)):C("",!0)]),t("tfoot",null,[t("tr",null,[X,j,t("td",z,n(a.cart.total),1)]),t("tr",null,[G,J,t("td",K,n(a.cart.final_total),1)])])]),t("div",Q,[t("button",W,[m(g,{to:"/charge",class:"text-white text-decoration-none"},{default:y(()=>[d("付款結帳")]),_:1})])])],64)}const st=b(I,[["render",Y]]);export{st as default};
